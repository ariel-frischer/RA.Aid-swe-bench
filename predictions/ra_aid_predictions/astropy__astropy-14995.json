{
    "instance_id": "astropy__astropy-14995",
    "model_patch": "diff --git a/.gitignore b/.gitignore\nindex aad550ae53..358274b981 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -89,3 +89,4 @@ pip-wheel-metadata\n \n # Files generated if figure tests are run\n results\n+.aider*\ndiff --git a/astropy/nddata/mixins/ndarithmetic.py b/astropy/nddata/mixins/ndarithmetic.py\nindex 4153dfccb2..56b8734066 100644\n--- a/astropy/nddata/mixins/ndarithmetic.py\n+++ b/astropy/nddata/mixins/ndarithmetic.py\n@@ -520,7 +520,9 @@ class NDArithmeticMixin:\n         elif self.mask is None and operand is not None:\n             # Make a copy so there is no reference in the result.\n             return deepcopy(operand.mask)\n-        elif operand is None:\n+        elif self.mask is None:\n+            return deepcopy(operand.mask)\n+        elif operand is not None and operand.mask is None:\n             return deepcopy(self.mask)\n         else:\n             # Now lets calculate the resulting mask (operation enforces copy)",
    "edited_files": [
        ".gitignore",
        "astropy/nddata/mixins/ndarithmetic.py"
    ],
    "research": "Agent run completed successfully",
    "attempt": 1
}